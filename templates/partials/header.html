{% load static %}
<header
    class="flex items-center fixed z-10 top-0 left-0 right-0 shrink-0 h-[--tw-header-height] bg-[--tw-page-bg] dark:bg-[--tw-page-bg-dark]"
    id="header">
    <!-- Container -->
    <div class="container-fluid flex justify-between items-stretch px-5 lg:ps-0 lg:gap-4" id="header_container">
        <div class="flex items-center mr-1">
            <div class="flex items-center justify-center lg:w-[--tw-sidebar-width] gap-2 shrink-0">
                <button class="btn btn-icon btn-light btn-clear btn-sm -ms-2 lg:hidden" data-drawer-toggle="#sidebar">
                    <i class="ki-filled ki-menu">
                    </i>
                </button>
                <a class="mx-1" href="{% url 'homeapp:dashboard' %}">
                    <img class="dark:hidden min-h-[24px]" src="{% static 'assets/media/app/mini-logo-primary.svg' %}" />
                    <img class="hidden dark:block min-h-[24px]"
                        src="{% static 'assets/media/app/mini-logo-primary-dark.svg' %}" />
                </a>
            </div>
            <div class="flex items-center">
                <h3 class="text-gray-700 mr-2 text-base">
                    Equipe MxRouter
                </h3>
                <span class="text-sm text-gray-400 font-medium px-2.5 hidden md:inline">
                    /
                </span>
                <div class="menu menu-default" data-menu="true">
                    <div class="menu-item" data-menu-item-offset="0, 10px" data-menu-item-placement="bottom-start"
                        data-menu-item-toggle="dropdown" data-menu-item-trigger="hover">
                        <button class="menu-toggle text-gray-900 font-medium">
                         {% if '/home/' in request.path %}
                            <i class="ki-filled ki-home mr-2"></i>
                            Início
                          {% elif '/tms/app/' in request.path  %}
                          <i class="ki-filled ki-geolocation mr-2"></i>
                            Rotas
                          {% elif request.path == '/perfil/' %}
                            Motoristas
                          {% elif request.path == '/conta/' %}
                            Veiculos
                          {% elif request.path == '/rede/' %}
                            Membros e Funções
                          {% else %}
                            Menu
                          {% endif %}
                            <span class="menu-arrow">
                                <i class="ki-filled ki-down"></i>
                            </span>
                        </button>
                        <div class="menu-dropdown w-58 py-2">
                            <div class="menu-item {% if '/home/' in request.path %}hidden{% endif %}">
                                <a class="menu-link" href="{% url 'homeapp:dashboard' %}" tabindex="0">
                                  <span class="menu-icon">
                                    <i class="ki-filled ki-home"></i>
                                  </span>
                                  <span class="menu-title">Início</span>
                                </a>
                            </div>
                            <div class="menu-item {% if '/tms/app/' in request.path %}hidden{% endif %}">
                                <a class="menu-link" href="{% url 'tmsapp:create_scripting' %}" tabindex="0">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-geolocation"></i>
                                    </span>
                                    <span class="menu-title">
                                        Rotas
                                    </span>
                                </a>
                            </div>
                            <div class="menu-item {% if '/perfil/' in request.path %}hidden{% endif %}">
                                <a class="menu-link" href="" tabindex="0">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-delivery"></i>
                                    </span>
                                    <span class="menu-title">
                                        Veiculos
                                    </span>
                                </a>
                            </div>
                            <div class="menu-item {% if '/conta/' in request.path %}hidden{% endif %}">
                                <a class="menu-link" href="" tabindex="0">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-user-square"></i>
                                    </span>
                                    <span class="menu-title">
                                        Motoristas
                                    </span>
                                </a>
                            </div>
                            <div class="menu-item {% if '/rede/' in request.path %}hidden{% endif %}">
                                <a class="menu-link" href="" tabindex="0">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-users"></i>
                                    </span>
                                    <span class="menu-title">
                                        Membros e Funções
                                    </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
        <!-- End of Logo -->
        <!-- Topbar -->
        <div class="flex items-center lg:gap-3.5">
            <div class="flex items-center gap-1.5">
                <button class="btn btn-icon btn-icon-2xl  size-8 text-gray-600 hover:text-primary"
                    data-modal-toggle="#search_modal">
                    <i class="ki-filled ki-magnifier ">
                    </i>
                </button>
            </div>
            <div class="menu" data-menu="true">
                <div class="menu-item" data-menu-item-offset="0px, 9px" data-menu-item-placement="bottom-end"
                    data-menu-item-placement-rtl="bottom-start" data-menu-item-toggle="dropdown"
                    data-menu-item-trigger="click|lg:click">
                    <div class="menu-toggle btn btn-icon rounded-full">
                            <div class="size-10 rounded-full inline-flex items-center justify-center font-semibold border border-primary-clarity bg-primary-light text-primary">
                                {{ request.user.username|slice:":2"|title  }}
                            </div>
                    </div>
                    <div class="menu-dropdown menu-default light:border-gray-300 w-screen max-w-[250px]">
                        <div class="flex items-center justify-between px-5 py-1.5 gap-1.5">
                            <div class="flex items-center gap-2">
                                <div class="size-10 rounded-full inline-flex items-center justify-center font-semibold border border-primary-clarity bg-primary-light text-primary">
                                    {{ request.user.username|slice:":2"|title  }}
                                </div>
                                <div class="flex flex-col gap-1.5">
                                    <span class="text-sm text-gray-800 font-semibold leading-none">
                                        {{ request.user.username }}
                                    </span>
                                    <a class="text-xs text-gray-600 hover:text-primary font-medium leading-none"
                                        href="html/demo3/account/home/get-started.html">
                                        {{ request.user.email }}
                                    </a>
                                </div>
                                </img>
                            </div>
                            <span class="badge badge-xs badge-primary badge-outline">
                                Pro
                            </span>
                        </div>
                        <div class="menu-separator">
                        </div>
                        <div class="flex flex-col">
                            <div class="menu-item">
                                <a class="menu-link" href="html/demo3/account/home/user-profile.html">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-profile-circle"></i>
                                    </span>
                                    <span class="menu-title">
                                        Meu Perfil
                                    </span>
                                </a>
                            </div>
                            <div class="menu-item" data-menu-item-offset="-50px, 0"
                                data-menu-item-placement="left-start" data-menu-item-placement-rtl="right-start"
                                data-menu-item-toggle="dropdown" data-menu-item-trigger="click|lg:hover">
                                <div class="menu-link">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-setting-2"></i>
                                    </span>
                                    <span class="menu-title">
                                        Minha Conta
                                    </span>
                                    <span class="menu-arrow">
                                        <i class="ki-filled ki-right text-3xs rtl:transform rtl:rotate-180"></i>
                                    </span>
                                </div>
                                <div class="menu-dropdown menu-default light:border-gray-300 w-full max-w-[220px]">
                                    <div class="menu-item">
                                        <a class="menu-link" href="html/demo3/account/security/overview.html">
                                            <span class="menu-icon">
                                                <i class="ki-filled ki-message-edit"></i>
                                            </span>
                                            <span class="menu-title">
                                                Permissões
                                            </span>
                                        </a>
                                    </div>
                                    <div class="menu-item">
                                        <a class="menu-link" href="html/demo3/account/members/teams.html">
                                            <span class="menu-icon">
                                                <i class="ki-filled ki-setting"></i>
                                            </span>
                                            <span class="menu-title">
                                                Configurações
                                            </span>
                                        </a>
                                    </div>
                                    <div class="menu-item">
                                        <a class="menu-link" href="html/demo3/account/integrations.html">
                                            <span class="menu-icon">
                                                <i class="ki-filled ki-switch"></i>
                                            </span>
                                            <span class="menu-title">
                                                Integrações
                                            </span>
                                        </a>
                                    </div>
                                    
                                    <div class="menu-separator"></div>
                                    <div class="menu-item">
                                        <a class="menu-link" href="/admin/">
                                            <span class="menu-icon">
                                                <i class="ki-filled ki-message-edit"></i>
                                            </span>
                                            <span class="menu-title">
                                                Backend
                                            </span>
                                        </a>
                                    </div>
                                    
                                    <div class="menu-separator"></div>
                                    <div class="menu-item">
                                        <a class="menu-link" href="html/demo3/account/security/overview.html">
                                            <span class="menu-icon">
                                                <i class="ki-filled ki-shield-tick"></i>
                                            </span>
                                            <span class="menu-title">
                                                Notificações
                                            </span>
                                            <label class="switch switch-sm">
                                                <input checked name="check" type="checkbox" value="1" />
                                            </label>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="menu-item">
                                <a class="menu-link" href="https://devs.keenthemes.com">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-message-programming"></i>
                                    </span>
                                    <span class="menu-title">
                                        HelpDesk
                                    </span>
                                </a>
                            </div>
                        </div>

                        <div class="menu-separator">
                        </div>
                        <div class="flex flex-col">
                            <div class="menu-item mb-0.5">
                                <div class="menu-link">
                                    <span class="menu-icon">
                                        <i class="ki-filled ki-moon">
                                        </i>
                                    </span>
                                    <span class="menu-title">
                                        Dark Mode
                                    </span>
                                    <label class="switch switch-sm">
                                        <input data-theme-state="dark" data-theme-toggle="true" name="check"
                                            type="checkbox" value="1">
                                        </input>
                                    </label>
                                </div>
                            </div>
                            <div class="menu-item px-4 py-1.5">
                                <form method="post" action="{% url 'authapp:logout' %}">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-sm btn-light justify-center w-full">
                                        Log out
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of Topbar -->
    </div>
    <!-- End of Container -->
</header>